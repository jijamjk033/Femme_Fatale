<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>
    <%= locals.title %>
  </title>
  <meta name="description" content="<%= locals.description %>" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="./assets/css/style.css" />
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-body-transparent d-flex position-absolute fixed-top">
    <div class="container container-logo" style="margin: 0 0 0 20px; width: 30vw">
      <a id="logo_ff" href="#"><img class="img-fluid justify-content-start"
          src="./assets/images/Logo/FemmeFatale_logo.png" alt="logo_ff" /></a>
    </div>
  </nav>

  <div
    style="background-image: url('./assets/images/background/240_F_538627760_ah9BPKQ0K4d9PnJ6O5UrsPATy1IaY3ne.jpg'); background-repeat: no-repeat; background-size: cover;"
    class="image-fluid mt-0">
    <div class="row justify-content-center">
      <% if (typeof userCheck !=='undefined' ) { %>
        <div class="alert alert-danger fade show mt-2" id="error-message" role="alert">
          <%- userCheck %>
        </div>
        <%} %>
          <div class="col-md-5">
            <!-- Registration Form -->
            <div
              style="background-image: url('./assets/images/background/360_F_252462576_koy7njo9iYx6gUcM26IZcDUs9fMKIKJs.jpg'); background-repeat: no-repeat; background-size: cover;"
              class=" mt-4 mb-4 card custom-form-container image-fluid ">
              <div class="card-body">
                <h1 class="card-title text-center pt-2 pb-0">Sign up</h1>
                <br /><br />
                <div class="alert alert-danger fade show" id="error-message" role="alert" style="display: none">
                </div>
                <form id="myForm" action="/register" method="post" onsubmit="return validation()">
                  <div class="mb-1 custom-form-field">
                    <input type="text" class="form-control" name="name" placeholder="Enter Full name"
                      onblur="nameChecking()" id="name" />
                    <div id="errorname" class=" ms-2  text-danger"></div>
                  </div>
                  <br />
                  <div class="mb-1 custom-form-field">
                    <input type="email" class="form-control" name="email" placeholder="Enter Email" id="email"
                      onblur="emailChecking()" />
                    <div id="erroremail" class=" ms-2  text-danger"></div>
                  </div>
                  <br />
                  <div class="mb-1 custom-form-field">
                    <input type="text" class="form-control" name="mobile" placeholder="Enter Mobile" id="number"
                      onblur="numberChecking()" />
                    <div id="errornumber" class=" ms-2  text-danger"></div>
                  </div>
                  <br />
                  <div class="mb-1 custom-form-field">
                    <input type="password" class="form-control" name="password" placeholder="Enter Password"
                      onblur="passwordChecking()" id="password" />
                    <div id="errorpassword" class="ms-2 text-danger"></div>
                  </div>
                  <br />
                  <div class="mb-1 custom-form-field">
                    <input type="password" class="form-control" placeholder="Confirm Password"
                      onblur="password2Checking()" id="cpassword" />
                    <div id="errorcpassword" class="mt-0 ms-2  text-danger"></div>
                  </div>
                  <br />

                  <div class="col-lg-6">
                    <div class="toggle_info">
                      <span>
                        <i class="fi-rs-label mr-10"></i>
                        <span class="text-secondary">Have a referral code?</span>
                        <a href="#referral" data-bs-toggle="collapse" class="collapsed font-weight-bold ms-2"
                          style="color: rgb(158, 42, 102); text-decoration: none;" aria-expanded="false">Click here</a>
                      </span>
                    </div>
                    <div class="panel-collapse collapse coupon_form" id="referral">
                      <div class="panel-body">
                          <div class="form-group mt-1" id="referral-code-group">
                            <label for="referralCode" class="mt-1">Enter the referral code</label>
                            <input type="text" class="form-control" name="referralCode" id="referralCode"
                              value="<%= referral %>" <%=referral ? 'readonly' : '' %>>
                          </div>
                      </div>
                    </div>
                  </div>


                  <div class="text-center">
                    <button type="submit" class="btn btn-primary w-50 rounded-pill mt-3">
                      Register
                    </button>
                  </div>
                  <% if (typeof message !=='undefined' ) { %>
                    <div style="height: 30px; padding-top: 4px" class="text-center text-danger mt-2">
                      <h6>
                        <%= message %>
                      </h6>
                    </div>
                    <% } %>
                </form>
                <p class="mt-3 text-center text-dark">
                  Go back to Login Page <a class="text-decoration-none"
                    style="color: rgb(158, 42, 102); text-decoration: none;" href="/login"> Login</a>
                </p>
                <div class="text-center">
                </div>
              </div>
            </div>
            <!-- End Registration Form -->
          </div>
    </div>
  </div>

  <script>
    function nameChecking() {
      let name = document.getElementById("name").value;
      if (name === "") {
        document.getElementById("errorname").innerHTML = "Please enter your name";
        return false;
      } else if (/^[[a-zA-Z\s]+$/.test(name) == false) {
        document.getElementById("errorname").innerHTML = "Please enter alphabets only";
        return false;
      } else {
        document.getElementById("errorname").innerHTML = "";
        return true;
      }
    }

    function emailChecking() {
      let emailid = document.getElementById("email").value;
      if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(emailid) == false) {
        document.getElementById("erroremail").innerHTML = "Please enter a valid email id";
        return false;
      } else {
        document.getElementById("erroremail").innerHTML = "";
        return true;
      }
    }

    function numberChecking() {
      let num = document.getElementById("number").value;
      if (/^\d{10}$/.test(num) == false) {
        document.getElementById("errornumber").innerHTML = "Please enter a valid number";
        return false;
      } else {
        document.getElementById("errornumber").innerHTML = "";
        return true;
      }
    }
    let password = document.getElementById("password").value;
    function passwordChecking() {
      password = document.getElementById("password").value;
      console.log(password, "kkkkk");
      if (password == "") {
        document.getElementById("errorpassword").innerHTML = "Create your password";
        return false;
      } else if (password.length < 8) {
        document.getElementById("errorpassword").innerHTML = "Enter a minimum of 8 digits";
        return false;
      } else {
        document.getElementById("errorpassword").innerHTML = "";
        return true;
      }
    }

    function password2Checking() {
      let password2 = document.getElementById("cpassword").value;
      if (password2 == "") {
        document.getElementById("errorcpassword").innerHTML = "Confirm your password";
        return false;
      } else if (password2 != password) {
        document.getElementById("errorcpassword").innerHTML = "Password not matched";
        return false;
      } else if (password2.length < 8) {
        document.getElementById("errorcpassword").innerHTML = "Enter a minimum of 8 digits";
        return false;
      } else {
        document.getElementById("errorcpassword").innerHTML = "";
        return true;
      }
    }

    function validation() {
      if (nameChecking() && emailChecking() && numberChecking() && passwordChecking() && password2Checking()) {
        document.getElementById("myForm").submit();
      }
      else {
        nameChecking();
        emailChecking();
        numberChecking();
        passwordChecking();
        password2Checking();
        return false;
      }
    }

  </script>
  <script src="./JS/validation.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>